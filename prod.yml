version: "3.8"

services:
  proxy:
    image: nginx:latest
    container_name: miljomataren_proxy
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    ports:
      - "${PORT}:80"
    expose:
      - "${PORT}"

  lowe:
    image: registry.gitlab.com/vilhelm/miljomataren:lowe
    ports: 5000:5000

  abernathy:
    image: registry.gitlab.com/vilhelm/miljomataren:abernathy
    ports: 3000:3000

  postgresql:
    image: postgres
    environment:
      POSTGRES_DB: "miljomataren"
      POSTGRES_USER: "miljomataren"
      POSTGRES_PASSWORD: "password"
      TZ: "Europe/Stockholm"
      PGTZ: "Europe/Stockholm"
    ports:
      - 5432:5432
  redis:
    image: redis
    ports:
      - 6379:6379
